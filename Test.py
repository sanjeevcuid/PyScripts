"""import reimport csvimport sys#scrape the market dataCITI_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(\d+)\s*\/\s*(\d*)\s+(\d+)[+-/*xX]?(\d*)"DB_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(\d+)\s*\/\s*(\d*)\s+(\d*\.?\d*)\s?[Xx/]\s?(\d*\.?\d*)"JPM_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(?:\d+\.\d+|NA)\s+(\d+)\/(\d*)\s+(\d\d?)\s?x\s?(\w*)"Date_expr = '(\w+\s+\d\d?\s+\d{4})\s+(\d\d?:\d\d:\d\d?)'with open("CITI-markets.txt") as input:    CITI_data = input.read()CITI_bonds = re.findall(CITI_expr,CITI_data)CITI_dates = re.findall(Date_expr,CITI_data)with open("DB-markets.txt") as input:    DB_data = input.read()DB_bonds = re.findall(DB_expr,DB_data)DB_dates = re.findall(Date_expr,DB_data)with open("JPM-markets.txt") as input:    JPM_data = input.read()JPM_bonds = re.findall(JPM_expr,JPM_data)JPM_dates = re.findall(Date_expr,JPM_data)#write the scraped data to a csv fileCITI_file_stream =  open('CITI-CRT-MARKETS.csv', 'wt')try:    writer = csv.writer(CITI_file_stream ,delimiter=',', lineterminator='\n')    writer.writerow( ('DATE','TIME','SECURITY','SIZE BID','SIZE ASK','MKT BID','MKT ASK') )    for each_bond in CITI_bonds:        writer.writerow((CITI_dates[len(CITI_dates)-1][0].strip(),CITI_dates[len(CITI_dates)-1][1].strip(),                          each_bond[0].strip(),each_bond[3].strip(),each_bond[4].strip(),each_bond[1].strip(),each_bond[2].strip()))finally:    CITI_file_stream.close()#write the scraped data to a csv fileDB_file_stream =  open('DB-CRT-MARKETS.csv', 'wt')try:    writer = csv.writer(DB_file_stream,delimiter=',', lineterminator='\n')    writer.writerow( ('DATE','TIME','SECURITY','SIZE BID','SIZE ASK','MKT BID','MKT ASK') )    for each_bond in DB_bonds:        writer.writerow((DB_dates[len(DB_dates)-1][0].strip(),DB_dates[len(DB_dates)-1][1].strip(),                          each_bond[0].strip(),each_bond[3].strip(),each_bond[4].strip(),each_bond[1].strip(),each_bond[2].strip()))finally:    DB_file_stream.close()#write the scraped data to a csv fileJPM_file_stream =  open('JPM-CRT-MARKETS.csv', 'wt')try:    writer = csv.writer(JPM_file_stream,delimiter=',', lineterminator='\n')    //writer.writerow( ('DATE','TIME','SECURITY','SIZE BID','SIZE ASK','MKT BID','MKT ASK') )    for each_bond in JPM_bonds:        writer.writerow((JPM_dates[len(JPM_dates)-1][0].strip(),JPM_dates[len(JPM_dates)-1][1].strip(),                          each_bond[0].strip(),each_bond[3].strip(),each_bond[4].strip(),each_bond[1].strip(),each_bond[2].strip()))finally:    JPM_file_stream.close()"""import reimport csv#import sys#scrape the market dataCITI_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(\d+)\s*\/\s*(\d*)\s+(\d+)[+-/*xX]?(\d*)"#CITI_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(\d+)"DB_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(\d+)\s*\/\s*(\d*)\s+(\d*\.?\d*)\s?[Xx/]\s?(\d*\.?\d*)"JPM_expr = "(\w+\s+\d+[-/\\,]\w+\s+\w+)\s+(?:\d+\.\d+|NA)\s+(\d+)\/(\d*)\s+(\d\d?)\s?x\s?(\w*)"Date_expr = "((?:\d\d?+\w+)(?:\s+|\/\s?)\d\d?\s+\d{4}?)\s+(\d\d?:\d\d:\d\d?)"def scrape_data(bank_name):    global CITI_expr, DB_expr, JPM_expr    with open(bank_name + '-markets.txt') as input:        data = input.read()    if (bank_name == 'CITI'):        expr = CITI_expr    elif (bank_name == 'DB'):        expr = DB_expr    else:        expr = JPM_expr    bonds = re.findall(expr,data)    dates = re.findall(Date_expr ,data)    return bonds, datesdef write_to_file(bank_name): #CITI, GS, JPM, DB    file_name = bank_name + '-CRT-MARKETS.csv'    data = scrape_data(bank_name)    bonds = data[0]    dates = data[1]    file_stream =  open(file_name, 'wt')    try:        writer = csv.writer(file_stream ,delimiter=',', lineterminator='\n')        writer.writerow( ('DATE','TIME','DEALER','SECURITY','SIZE BID','SIZE ASK','MKT BID','MKT ASK') )        for each_bond in bonds:            # writer.writerow((dates[len(dates)-1][0].strip(),dates[len(dates)-1][1].strip(),bank_name,            #               each_bond[0].strip(),each_bond[3].strip(),each_bond[4].strip(),each_bond[1].strip(),each_bond[2].strip()))            writer.writerow(('7/14/2015','15:17:21',bank_name,                          each_bond[0].strip(),'','',each_bond[1].strip(),''))    finally:        file_stream.close()write_to_file('CITI')#write_to_file('DB')#write_to_file('JPM')